{% extends "Shared/_layout.html" %}
{% load static %}
{% load custom_filters %}


{%block head%}
    <title> DATAMITE - ANP-AHP - Step 1 </title>
{%endblock%}
{% block navbar %}{% endblock%}
{% block main1%}{%endblock%}


{%block main2%}
<div class="row">

{% include "Shared/_survey.html" %}


<div class="col-md-9">
    <div id="surveyContainer">

        <div class="panel-heading card-header">
            <div class="sv_header__text">
                <h3><span style="position: static;"> Step 1 - Objective selection: </span></h3>
            </div>
            <p  style="text-align: justify;">
                In this section you define what is the primary objective / strategy for the KPIs and what role you play. This provides a general perspective of the role that the KPIs play and facilitates the application of the ANP model defined in the HOW TO section.
            </p>
        </div>
        </br>

        <form method='POST'>
            {% csrf_token %}
            <div style="display: inline-block; width:100%;">
                <p  style="text-align: justify;">
                    Please select the objective that is more relevant to you. If you want to add a new objective, please use the "Create a new objective" button at the end of the page.<br/>
                </p>
            </div>
            
            <div class="form-group">
                <table class="table table-hover">
                    <thead>
                    <tr>
                        <th scope="col">Selected</th>
                        <th scope="col">Name</th>
                        <th scope="col">Definition</th>
                    </tr>
                    </thead>
                    <tbody>
                        {% for choice in form.objective %}
                            {% for obj in form.objective.field.queryset %}
                                {% if choice.data.value == obj.pk|stringformat:"s" %}
                                    <tr>
                                        <td>{{ choice.tag }}</td>
                                        <td><b>{{ obj.name }}<b/></td>
                                        <td style="text-align: justify;">{{ obj.short_definition }} {% if obj.author %}(<b>Created by:</b> {{ obj.author }}{% endif%})</td>
                                    </tr>
                                {% endif %}
                            {% endfor %}
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        
            <a class="btn btn-outline-secondary" href="{% url 'create_objective' pk=ANPAHP.pk %}" > Create a new objective </a>
            <a class="btn btn-outline-secondary" href="{% url 'delete_objective' pk=ANPAHP.pk %}" > Delete an objective </a>

            <button type="submit" class="btn btn-primary card-btn" name="action" value="confirm"> Confirm selection </button>
        </form>
    </div>
</div>


{% endblock %}
{% block footer%}{%endblock%}
{%block lastk%}{% endblock %}
