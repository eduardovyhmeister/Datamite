{% extends "Shared/_layout.html" %}
{% load static %}

{%block head%}
    <title>DATAMITE - Delete an objective</title>
{%endblock%}

{% block main2 %}
<div class="row">
{% include "Shared/_survey.html" %}
<div class="col-md-9">
    <div id="surveyContainer">
        <h1>Delete one of your objectives:</h1>
        <p>Select one of your created objectives and confirm its deletion.</p>

        <form method="POST">
            {% csrf_token %}
            <div class="form-group">
                {{ form.objective.label_tag }}
                {{ form.objective }}
            </div>

            {% if form.objective.errors %}
                <div class="text-danger">
                    {{ form.objective.errors }}
                </div>
            {% endif %}

            <a class="btn btn-secondary" href="{% url 'myANPAHPStep1' pk=ANPAHP.pk %}">Cancel</a>
            <button class="btn btn-danger" type="submit" onclick="return confirmObjectiveDelete();">
                Delete selected objective
            </button>
        </form>
    </div>
</div>

<script>
    function confirmObjectiveDelete() {
        // Used to display the name of the selected objective in the confirm message.
        const select = document.getElementById('id_objective');
        const selectedIndex = select.selectedIndex;
    
        if (selectedIndex === -1 || !select.value) {
            alert("Please select an objective to delete.");
            return false;
        }
    
        const selectedName = select.options[selectedIndex].text;
        return confirm(`Are you sure you want to delete objective "${selectedName}"? This action cannot be undone.`);
    }
</script>

{% endblock %}

